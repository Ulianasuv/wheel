// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–∏–∫—Å–∏–Ω—ã
@import 'mixins.scss';


//—Ç—É—Ç –≤—Å—Ç–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π –∫–æ–¥

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  @include gradient-bg;
  min-height: 100vh;
}

.app {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 2rem;
  min-height: 100vh;
  align-items: start;
  
  @include respond(tablet) {
    grid-template-columns: 1fr;
    padding: 1rem;
    gap: 1.5rem;
  }
}

.wheel-container {
  @include fade-in;
  
  h1 {
    text-align: center;
    margin-bottom: 2rem;
    color: color(white);
    @include text-gradient;
    font-size: 2.5rem;
    
    @include respond(tablet) {
      font-size: 2rem;
      margin-bottom: 1.5rem;
    }
  }
}

/* –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã */
.deal-wheel {
  @include wheel-size(600px);
  
  position: relative;
  display: grid;
  grid-gap: calc(var(--size) / 20);
  align-items: center;
  grid-template-areas:
    "spinner"
    "trigger";
  font-size: calc(var(--size) / 21);
}

.deal-wheel > * {
  grid-area: spinner;
}

.deal-wheel .btn-spin {
  grid-area: trigger;
  justify-self: center;
}

.spinner {
  position: relative;
  display: grid;
  align-items: center;
  grid-template-areas: "spinner";
  width: var(--size);
  height: var(--size);
  transform: rotate(calc(var(--rotate, 0) * 1deg));
  @include border-radius(50%);
  @include transition(transform, 8s, cubic-bezier(0.1, -0.01, 0, 1));
  overflow: hidden;
  
  & * {
    grid-area: spinner;
  }
}

.prize {
  @include flex-center;
  padding: 0 calc(var(--size) / 6) 0 calc(var(--size) / 20);
  width: 50%;
  height: 50%;
  transform-origin: center right;
  @include transform(rotate(var(--rotate)));
  user-select: none;
}

.text {
  color: color(white);
  font-weight: bold;
  font-size: calc(var(--size) / 20);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.ticker {
  position: relative;
  left: calc(var(--size) / -15);
  width: calc(var(--size) / 10);
  height: calc(var(--size) / 20);
  @include ticker-gradient(0, 3%);
  z-index: 10;
  clip-path: polygon(20% 0, 100% 50%, 20% 100%, 0% 50%);
  transform-origin: center left;
}

.btn-spin {
  @include button-primary;
  @include hover-darken(color(primary), 15%);
  
  &:disabled {
    background: color(gray);
    color: color(light);
    cursor: not-allowed;
    
    &:hover {
      background: color(gray);
      @include transform(none);
      @include shadow(2);
    }
  }
}

.is-spinning {
  .spinner {
    @include transition(transform, 8s, cubic-bezier(0.1, -0.01, 0, 1));
  }
  
  .ticker {
    @include animation(tick, 700ms, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
}

@keyframes tick {
  40% {
    @include transform(rotate(-12deg));
  }
}

.prize.selected .text {
  color: #ffeb3b;
  @include animation(selected, 800ms, ease);
}

@keyframes selected {
  25% {
    @include transform(scale(1.25));
    text-shadow: 1vmin 1vmin 0 hsla(0 0% 0% / 0.1);
  }
  40% {
    @include transform(scale(0.92));
    text-shadow: 0 0 0 hsla(0 0% 0% / 0.2);
  }
  60% {
    @include transform(scale(1.02));
    text-shadow: 0.5vmin 0.5vmin 0 hsla(0 0% 0% / 0.1);
  }
  75% {
    @include transform(scale(0.98));
  }
  85% {
    @include transform(scale(1));
  }
}

// /* –ü–∞–Ω–µ–ª—å –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
// .history-panel {
//   @include card-base;
//   @include fade-in(0.5s);
//   height: fit-content;
  
//   @include respond(tablet) {
//     padding: 1.5rem;
//   }
// }

// .stats {
//   margin-bottom: 2rem;
//   padding-bottom: 1.5rem;
//   border-bottom: 2px solid color(light-gray);
  
//   h3 {
//     color: color(dark);
//     margin-bottom: 1.5rem;
//     font-size: 1.5rem;
//   }
// }

// .stats-grid {
//   @include grid(2, 1rem);
  
//   @include respond(phone) {
//     @include grid(1, 1rem);
//   }
// }

// .stat-item {
//   background: color(light);
//   padding: 1rem;
//   @include border-radius;
//   @include flex-column;
//   align-items: center;
//   @include transition;
//   @include transform(translateY(-3px));
//  @include shadow(2);
// }

// .stat-label {
//   font-size: 0.9rem;
//   color: color(gray);
//   margin-bottom: 0.5rem;
// }

// .stat-value {
//   font-size: 1.8rem;
//   font-weight: bold;
  
//   &.win {
//     color: color(success);
//   }
  
//   &.lose {
//     color: color(danger);
//   }
// }

// .history {
//   h3 {
//     color: color(dark);
//     margin-bottom: 1.5rem;
//     font-size: 1.5rem;
//   }
// }

// .history-header {
//   @include flex-between;
//   margin-bottom: 1rem;
  
//   @include respond(phone) {
//     flex-direction: column;
//     gap: 1rem;
//     align-items: flex-start;
//   }
// }

// .btn-clear {
//   @include button-secondary;
//   @include hover-darken(color(danger), 10%);
  
//   @include respond(phone) {
//     align-self: flex-start;
//   }
// }

// .empty-history {
//   text-align: center;
//   color: color(gray);
//   padding: 2rem;
//   font-style: italic;
// }

// .history-list {
//   max-height: 400px;
//   overflow-y: auto;
//   padding-right: 0.5rem;
// }

// .history-item {
//   @include flex-between;
//   align-items: center;
//   padding: 0.75rem;
//   margin-bottom: 0.5rem;
//   @include border-radius;
//   background: color(light);
//   @include transition(transform, 0.2s);
//  @include transform(translateX(5px));
  
  
//   &.win {
//     border-left: 4px solid color(success);
    
//     .history-prize {
//       color: darken-color(color(success), 10%);
//     }
//   }
  
//   &.lose {
//     border-left: 4px solid color(danger);
    
//     .history-prize {
//       color: darken-color(color(danger), 10%);
//     }
//   }
  
//   @include respond(phone) {
//     flex-direction: column;
//     align-items: flex-start;
//     gap: 0.5rem;
//   }
// }

// .history-time {
//   font-size: 0.8rem;
//   color: color(gray);
//   min-width: 60px;
// }

// .history-prize {
//   flex: 1;
//   margin: 0 1rem;
//   font-weight: 500;
//   @include text-truncate;
  
//   @include respond(phone) {
//     margin: 0;
//   }
// }

// .history-result {
//   font-size: 0.8rem;
//   padding: 0.25rem 0.5rem;
//   @include border-radius(12px);
//   font-weight: bold;
  
//   .win & {
//     background: rgba(color(success), 0.1);
//     color: color(success);
//   }
  
//   .lose & {
//     background: rgba(color(danger), 0.1);
//     color: color(danger);
//   }
// }

// /* –ü–æ–ª–æ—Å–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
// .history-list {
//   &::-webkit-scrollbar {
//     width: 6px;
//   }
  
//   &::-webkit-scrollbar-track {
//     background: color(light-gray);
//     @include border-radius(3px);
//   }
  
//   &::-webkit-scrollbar-thumb {
//     background: color(gray);
//     @include border-radius(3px);
    
//     &:hover {
//       background: color(dark);
//     }
//   }
// }

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ø—ã—Ç–∫–∞—Ö */
.attempts-notification {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  background: color(warning);
  color: color(white);
  padding: 1rem 1.5rem;
  @include border-radius;
  @include shadow(4);
  @include flex-center;
  gap: 0.5rem;
  z-index: 1000;
  @include animation(slideIn, 0.3s, ease);
  
  @keyframes slideIn {
    from {
      @include transform(translateX(100%));
      opacity: 0;
    }
    to {
      @include transform(translateX(0));
      opacity: 1;
    }
  }
  
  &.low {
    background: color(danger);
    @include pulse(color(danger));
  }
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
.loading-spinner {
  @include flex-center;
  width: 50px;
  height: 50px;
  
  &::after {
    content: '';
    width: 40px;
    height: 40px;
    border: 4px solid color(light-gray);
    border-top-color: color(primary);
    @include border-radius(50%);
    @include animation(spin, 1s, linear, 0s, infinite);
  }
}

@keyframes spin {
  to {
    @include transform(rotate(360deg));
  }
}





.error-boundary {
  background-color: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 8px;
  padding: 20px;
  margin: 20px 0;
  
  .error-content {
    text-align: center;
    
    h3 {
      color: #856404;
      margin-bottom: 10px;
    }
    
    p {
      color: #856404;
      margin-bottom: 15px;
    }
  }
  
  .error-details {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    padding: 10px;
    margin: 15px 0;
    text-align: left;
    font-size: 12px;
    
    summary {
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 5px;
      color: #495057;
    }
    
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      color: #dc3545;
      font-size: 11px;
    }
  }
  
  .error-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 15px;
    
    .retry-btn, .continue-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .retry-btn {
      background-color: #007bff;
      color: white;
      
      &:hover {
        background-color: #0056b3;
      }
    }
    
    .continue-btn {
      background-color: #6c757d;
      color: white;
      
      &:hover {
        background-color: #545b62;
      }
    }
  }
}

.history-container {
  margin-top: 30px;
  min-height: 300px;
}

.history-error-fallback {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  padding: 25px;
  color: white;
  
  .error-fallback-content {
    text-align: center;
    
    h3 {
      margin-bottom: 10px;
      font-size: 22px;
    }
    
    p {
      margin-bottom: 20px;
      opacity: 0.9;
    }
  }
  
  .fallback-stats {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 15px;
    margin: 20px 0;
    display: flex;
    justify-content: space-around;
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      
      .stat-label {
        font-size: 12px;
        opacity: 0.8;
        margin-bottom: 5px;
      }
      
      .stat-value {
        font-size: 24px;
        font-weight: bold;
      }
    }
  }
  
  .retry-btn {
    background-color: white;
    color: #764ba2;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
  }
}

// –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
@media (max-width: 768px) {
  .error-actions {
    flex-direction: column;
    
    button {
      width: 100%;
    }
  }
  
  .fallback-stats {
    flex-direction: column;
    gap: 15px;
  }
}

// –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
.history-component {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  border-radius: 16px;
  padding: 25px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  width: 100%;
  margin: 0 auto;
  border: 1px solid rgba(255, 255, 255, 0.2);

  .history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(108, 92, 231, 0.2);

    h2 {
      margin: 0;
      color: #333;
      font-size: 22px;
      font-weight: 600;
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .clear-btn {
      background: linear-gradient(45deg, #ff7675, #fd79a8);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(255, 118, 117, 0.3);

      &:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 118, 117, 0.4);
      }

      &:active:not(:disabled) {
        transform: translateY(0);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: linear-gradient(45deg, #ccc, #ddd);
        box-shadow: none;
      }
    }
  }

  .stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 25px;
    background: rgba(255, 255, 255, 0.7);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(108, 92, 231, 0.1);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);

    .stat {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      background: white;
      border-radius: 10px;
      transition: all 0.3s;

      &:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .stat-label {
        font-size: 12px;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 5px;
        font-weight: 600;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: #6c5ce7;
      }

      &:nth-child(2) .stat-value {
        color: #00b894;
      }

      &:nth-child(3) .stat-value {
        color: #ff7675;
      }

      &:nth-child(4) .stat-value {
        color: #fdcb6e;
      }
    }
  }

  .history-list {
    max-height: 400px;
    overflow-y: auto;
    padding-right: 10px;
    margin-top: 15px;

    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 10px;
    }

    &::-webkit-scrollbar-thumb {
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      border-radius: 10px;
    }

    .history-item {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
      border-left: 4px solid;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
      }

      &.win {
        border-left-color: #00b894;
        
        &::after {
          content: 'üèÜ';
          position: absolute;
          right: 10px;
          top: 50%;
          transform: translateY(-50%);
          opacity: 0.2;
          font-size: 24px;
        }
      }

      &.lose {
        border-left-color: #ff7675;
        
        &::after {
          content: 'üíî';
          position: absolute;
          right: 10px;
          top: 50%;
          transform: translateY(-50%);
          opacity: 0.2;
          font-size: 24px;
        }
      }

      &:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
      }

      .prize-text {
        font-weight: 600;
        color: #2d3436;
        font-size: 15px;
        max-width: 60%;
        word-break: break-word;
      }

      .timestamp {
        font-size: 12px;
        color: #636e72;
        background: rgba(99, 110, 114, 0.1);
        padding: 4px 8px;
        border-radius: 10px;
        white-space: nowrap;
      }
    }

    .empty-history {
      text-align: center;
      padding: 40px 20px;
      color: #636e72;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 12px;
      border: 2px dashed #dfe6e9;

      &::before {
        content: 'üìú';
        display: block;
        font-size: 40px;
        margin-bottom: 15px;
        opacity: 0.5;
      }
    }

    .history-error {
      text-align: center;
      padding: 20px;
      color: #ff7675;
      background: rgba(255, 118, 117, 0.1);
      border-radius: 12px;
      border: 1px dashed #ff7675;
      font-size: 14px;
    }
  }
}

// –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
@media (max-width: 768px) {
  .history-component {
    padding: 20px;
    margin-top: 20px;

    .history-header {
      flex-direction: column;
      gap: 10px;
      text-align: center;

      h2 {
        font-size: 20px;
      }
    }

    .stats {
      grid-template-columns: repeat(2, 1fr);
      padding: 15px;
      gap: 10px;

      .stat {
        padding: 8px;

        .stat-value {
          font-size: 20px;
        }
      }
    }

    .history-list {
      .history-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;

        .prize-text {
          max-width: 100%;
        }

        .timestamp {
          align-self: flex-end;
        }
      }
    }
  }
}

// –°—Ç–∏–ª–∏ –¥–ª—è fallback (–∫–æ–≥–¥–∞ –∏—Å—Ç–æ—Ä–∏—è —Å–ª–æ–º–∞–ª–∞—Å—å)
.history-error-fallback {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  width: 100%;
  margin: 0 auto;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.2);

  .error-fallback-content {
    h3 {
      color: #333;
      font-size: 22px;
      margin-bottom: 10px;
      background: linear-gradient(45deg, #ff7675, #fd79a8);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    p {
      color: #666;
      margin-bottom: 25px;
      font-size: 16px;
    }
  }

  .fallback-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin: 25px 0;
    background: rgba(255, 255, 255, 0.7);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(108, 92, 231, 0.1);

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);

      .stat-label {
        font-size: 12px;
        color: #666;
        text-transform: uppercase;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: #6c5ce7;
      }

      &:nth-child(2) .stat-value {
        color: #00b894;
      }
    }
  }

  .retry-btn {
    background: linear-gradient(45deg, #6c5ce7, #a29bfe);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
    }

    &:active {
      transform: translateY(0);
    }
  }
}

.daily-limit-message {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(5px);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1001;
  
  .message-content {
    background: white;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: popIn 0.4s ease-out;
    
    h3 {
      color: #ff7675;
      margin-bottom: 20px;
      font-size: 28px;
      font-weight: 700;
    }
    
    p {
      color: #636e72;
      margin-bottom: 30px;
      font-size: 18px;
      line-height: 1.6;
    }
    
    .close-btn {
      background: linear-gradient(45deg, #6c5ce7, #a29bfe);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 20px rgba(108, 92, 231, 0.3);
      
      &:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }
}

@keyframes popIn {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}